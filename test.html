<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Smooth Scroll Text Reveal</title>

<!-- GSAP core + plugins (Club GreenSock build) -->
<script src="https://assets.codepen.io/16327/gsap-latest-beta.min.js"></script>
<script src="https://assets.codepen.io/16327/ScrollTrigger.min.js"></script>
<script src="https://assets.codepen.io/16327/ScrollSmoother.min.js"></script>
<script src="https://assets.codepen.io/16327/SplitText3.min.js"></script>

<style>
body {
  margin: 0;
  padding: 0;
  overflow-x: hidden;
  background-color: #161616;
}

.img {
  width: 100%;
  height: 100vh;
  background: url(https://i.imgur.com/aGromZ6.png) no-repeat 50% 50%;
  background-size: cover;
}

#smooth-content {
  will-change: transform;
}

.text {
  padding: 10vh 0;
}

.text > h1 {
  max-width: 90vw;
  margin: auto;
  line-height: 1.2;
  font-size: 60px;
  color: gold;
  position: relative;
}

.red {
  color: red;
}

.mask {
  width: 100%;
  height: 115%;
  position: absolute;
  background: #161616;
  left: 0;
  top: 0;
  opacity: 0.8;
  transform-origin: right center;
}
</style>
</head>
<body>

<div id="smooth-wrapper">
  <div id="smooth-content">
    <div class="img"></div>

    <div class="text">
      <h1>
        Macaroon croissant <span class="red">pastry</span> shortbread cupcake chupa chups pudding.
        Gummies pie candy canes sweet roll cake chupa chups cake fruitcake.
        Cake bonbon chupa chups carrot cake cake gingerbread cookie cake.
      </h1>
    </div>

    <div class="img"></div>
  </div>
</div>

<script>
gsap.registerPlugin(ScrollTrigger, ScrollSmoother, SplitText);

// Smooth scrolling
ScrollSmoother.create({
  wrapper: "#smooth-wrapper",
  content: "#smooth-content",
  smooth: 2
});

let split = new SplitText("h1", { type: "lines" });
let masks = [];

function makeItHappen() {
  masks = [];
  split.lines.forEach((target) => {
    let mask = document.createElement("span");
    mask.className = "mask";
    target.style.position = "relative";
    target.append(mask);
    masks.push(mask);

    gsap.to(mask, {
      scaleX: 0,
      ease: "none",
      scrollTrigger: {
        trigger: target,
        scrub: true,
        start: "top center",
        end: "bottom center"
      }
    });
  });
}

function rebuild() {
  ScrollTrigger.getAll().forEach((t) => t.kill());
  masks.forEach((m) => m.remove());
  split.split();
  makeItHappen();
}

window.addEventListener("resize", rebuild);

makeItHappen();
</script>

</body>
</html>
